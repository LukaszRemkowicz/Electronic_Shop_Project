<!DOCTYPE html>
<html lang="en">
<head>

    {% load static %}

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/95019cdce1.js" crossorigin="anonymous"></script>

    <style type='text/css'>

        .tooglecolor {
            color: red !important;
        }

    </style>

    <!-- Bootstrap -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>

    <script rel="script">
        window.setTimeout(function() {
        $(".alert").fadeTo(500, 0).slideUp(500, function(){
            $(this).remove();
        });
        }, 5000);

    </script>

    <!-- Custom css -->
    
    <link rel="stylesheet" href="{% static 'css/main.css' %}">

    <!-- Custom Scripts -->

    <script type="text/javascript" src="{% static 'js/main.js' %}"></script>
    <script>
        var user = '{{ request.user }}'
        var orderCartTotal = '{{ order.get_cart_items }}'

        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        const csrftoken = getCookie('csrftoken');
    </script>


    <!-- Fonts -->

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500&display=swap" rel="stylesheet">   


    <title>ElectroShop</title>
</head>
<body>
    <header class="">

        <!-- navbar -->
        <div class="bg-white box-shadow">
            <div class="container mb-4 ">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <a class="navbar-brand" href="{% url 'landing-page' %}"><img src="{% static 'images/blocks-logo/electronic2.png' %}" alt=""></a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <form class="form-inline my-2 my-lg-0 flex-row w-100 border rounded-pill d-flex justify-content-between">
                        <div class="search-bar text-left">
                            <input class="form-control  mr-sm-2 border-0 rounded-pill" type="search" placeholder="What are you looking for?" aria-label="Search">
                        </div>
                        <div class="form-cont d-flex ">
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Everywhere
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                    <a class="dropdown-item" href="#">Action</a>
                                    <a class="dropdown-item" href="#">Another action</a>
                                <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" href="#">Something else here</a>
                                </div>
                            </li>
                            <button class="btn btn-outline-success my-sm-0 border-0 text-white rounded-pill" type="submit">
                                <svg xmlns="http://www.w3.org/2000/svg" width="50" height="25" viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                            </button>
                        </div>
                    </form>
                
                    <div class=" collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mr-auto">
                            <li class="nav-item active" id="nav-line">
                                <a class="btn d-flex flex-column text-center" href="#"><i class="fas fa-headset fa-2x d-flex flex-column text-center"></i><span class="nav-font-size">Contact</span></a>
                            </li>
                            <li class="nav-item">
                            {% if user.is_authenticated %} 
                                <a href="{% url 'account' %}" class="btn d-flex text-center"><i class="fas fa-user-alt fa-2x"></i> <span class="nav-font-size"></span>
                                
                                    {% if user.first_name and user.last_name %}

                                    <h5 style="font-size: 0.7rem">{{user.first_name }} {{ user.last_name }}</h5>

                                    {% else %}
                                    {{ user.username }}

                                    {% endif %}
                                
                                </a> 

                                {% else %}
                                <a href="" data-toggle="modal" data-target="#Modal1" class="btn d-flex  text-center just-for-testing-DOM"><i class="fas fa-user-alt fa-2x"></i> <span class="nav-font-size"></span>Login</a>

                            {% endif %}
                            
                            </li>
                            <li class="nav-item">
                                <a href="" class="btn d-flex flex-column text-center"><i class="fas fa-heart fa-2x d-flex flex-column text-center"></i><span class="nav-font-size">Wishlist</span></a> 
                            </li>
                                                        
                            <li class="nav-item" >
                                <div id="shopping-cart" data-totalitems={% if not order %}'0'{% else %}"{{ order.get_cart_items }}"{% endif %}> 
                                    <a data-product="{{ product.id }}" data-action="add" class="btn d-flex flex-column text-center" href="{% url 'shopping-cart' %}"><i class="fas fa-shopping-cart fa-2x shopping-cart"></i><span class="nav-font-size"> 0,00z≈Ç</span></a>
                                </div>
                            </li>
                        </ul>
                
                    </div>
                </nav>
            </div>
        </div>


        <!-- Modal login-->

            {% if not user.is_authenticated %}
                <div class="modal fade" id="Modal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">

                    <div class="line-close" data-dismiss="modal" aria-label="Close">
                        <div class="line"></div>
                    </div>

                    <!-- <button type="button" class="close " data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button> -->
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-body">
                                <div class="form-container">
                                    <div class="inside-container d-flex flex-column bg-light-grey border-rounded">
                                        <div class="sign-in flex-container">
                                            <h3 class="inline"><span>Sign in</span> to continue</h3>
                                            <p class="inline">Not a member yet? <a class="btn mt-0 border-0 pl-1 font-red" href="{% url 'register' %}">Register now</a> </p>
                                                    
                                        </div>
                                        <form action="{% url 'landing-page' %}" method="post" class="flex-container flex-column login-form">

                                            {% csrf_token %}
                                            {% load widget_tweaks %}

                                            {% render_field login_form.username type="text" autocomplete="username" placeholder="Email or Username" %}
                                            {% render_field login_form.password type="password" autocomplete="current-password" placeholder="Password" %} 
                                            

                                            {% comment %} <input type="text" autocomplete="username" placeholder="Email or Username"> {% endcomment %}
                                            {% comment %} <input type="password" autocomplete="current-password" placeholder="Password"> {% endcomment %}
                                            <div class="check flex-container">
                                                {{ keep_me.keep_me_logged }}
                                                {% comment %} <input type="checkbox" class="checkbox"> {% endcomment %}
                                                <p class="inline">Keep me loggeed in</p> 
                                            </div>
                                            <button type="submit" class="btn-red">Login Now</button>
                                        </form>
                                        <p class="forgot-pass"><a href="">Forgot your password?</a></p>
                                        <div class="social-sigin">
                                            <h2>Or sign in with</h2>
                    
                                            <div class="social-buttons grid-container">
                                                <a href=""> <img src="{% static 'images/social-logos/google-icon.svg' %}" alt="">
                                                    Google
                                                </a>
                                                <a href=""> <img src="{% static 'images/social-logos/twitter (2).svg' %}" alt="">
                                                    Twitter</a>
                                                <a href=""> <img src="{% static 'images/social-logos/facebook-3.svg' %}" alt="">
                                                    Facebook</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            {% endif %}

        <!-- Second bar -->

        <section class="another-navbar bg-white box-shadow">
            <div class="container flex-container fas-flex">
                <i class="fas fa-desktop"><span class='fas-font'> Computers</span></i>
                <i class="fas fa-laptop"><span class='fas-font'> Laptops</span></i>
                <i class="fas fa-tv"><span class='fas-font'> TV</span></i>
                <i class="fas fa-server"><span class='fas-font'> Servers</span></i>
                <i class="fas fa-tablet-alt"><span class='fas-font'> Tablets</span></i>
                <i class="fas fa-mobile-alt"><span class='fas-font'> Smartphones</span></i>
                <i class="far fa-hdd"><span class='fas-font'> HDD's</span></i>
                <i class="fas fa-microchip"><span class='fas-font'> computer components</span></i></i>

            </div>
        </section> 
    </header>

    {% block content %}{% endblock %}



    <!-- Footer -->

    <footer class="bg-white">
        <div class="container flex-container footer">
            <div class="orders">
                <h3 class="py-1">Orders</h3>
                <ul>
                    <li>Supply</li>
                    <li>Installments</li>
                    <li>Insurance</li>
                    <li>Assembly</li>
                    <li>Returns and complaints</li>
                    <li>Frequently Asked Questions</li>
                </ul>
            </div>
            <div class="about">
                <h3 class="py-1">ElectronicShop</h3>
                <ul>
                    <li>About us</li>
                    <li>Regulations</li>
                    <li>privacy policy</li>
                    <li>Press office</li>
                    <li>Forum</li>
                    <li>Career</li>
                    <li>Contact</li>
                </ul>
            </div>
            <div class="contact-block flex-container flex-column">
                <div class="phone">
                    <h3 class="py-1">Contact</h3>
                    <i class="fas fa-phone fa-2x"> </i>
                    <p class="inline">34 377 00 00</p> 
                    <p>pon. - pt. 8:00 - 21:00</p>
                    <p>sob. - niedz. 8:00 - 19:00</p>

                </div>
                <div class="live-chat">
                    <h3>Start live chat</h3>
                    <i class="far fa-comment-dots fa-5x"></i>
                </div>
            </div>
            <div class="contact flex-container flex-column">

                
                <div class="icons-boxes">
                    <i class="fas fa-envelope fa-2x"> </i>
                    <h4>electronic@shop.com</h4>
                    <i class="fas fa-map-marker-alt fa-2x"></i>
                    <h4>Stationary shops</h4>
                </div>

                <div class="social">
                    <h3 class="align-center">Socials</h3>
                    <div class="icons flex-container">
                        <i class="flex-container">
                            <svg class="social-objects facebook" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>Facebook icon</title>
                            <path  d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                        </i>
                        
                        <i class="flex-container">
                            <svg class="social-objects instagram" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Instagram icon</title>
                            <path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/></svg>
                        </i> 
                        <i class="flex-container">
                            <svg class="social-objects" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>YouTube icon</title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
                        </i>   
                            
                        <i class="flex-container">
                            <svg class="social-objects" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>Twitter icon</title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>
                        </i>
                    
                    </div>
                </div>        
            </div>           
            </div>

        </div>
        
    </footer>

    <!-- jQUERY -->

    <link href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.css" rel="stylesheet" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>


    <script>
        $('.add-to-cart').on('click', function () {
                var button = $(this)
                var cart = $('#shopping-cart');
                var carTotal = cart.attr('data-totalitems')
                var newCartTotal = parseInt(carTotal) + 1;
                var imgtodrag = $(".main-pic");
                cart.attr('data-totalitems', newCartTotal);
                if (imgtodrag) {
                    var imgclone = imgtodrag.clone()
                        .offset({
                        top: imgtodrag.offset().top,
                        left: imgtodrag.offset().left
                    })
                        .css({
                        'opacity': '0.5',
                            'position': 'absolute',
                            'height': '150px',
                            'width': '150px',
                            'z-index': '100'
                    })
                        .appendTo($('body'))
                        .animate({
                        'top': cart.offset().top + 10,
                            'left': cart.offset().left + 10,
                            'width': 75,
                            'height': 75
                    }, 1000, 'easeInOutExpo');
                    
                    setTimeout(function () {
                        cart.effect("shake", {
                            times: 2
                        }, 200);
                    }, 1500);

                    imgclone.animate({
                        'width': 0,
                            'height': 0
                    }, function () {
                        $(this).detach()
                    });

                }
                

            });
    </script>

    

    <script src="{% static 'js/cart.js' %}" type="text/javascript"></script>   
    <script src="{% static 'js/orderForm.js' %}"></script>
    <script src="{% static 'js/domExample.js' %}" type="text/javascript"></script> 
    <script src="{% static 'js/addressBook.js' %}" type="text/javascript"></script>

</body>
</html>