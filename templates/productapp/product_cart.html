{% extends 'base.html' %}
{% load static %}

{% block content  %}

<div class="container mt-4">
	<div class="row">
		<aside class="col-md-3">

			<div class="card">
				<article class="filter-group">
					<header class="card-header">
						<a href="#" data-toggle="collapse" data-target="#collapse_1" aria-expanded="true" class="">
							<i class="icon-control fa fa-chevron-down"></i>
							<h6 class="title">Product type</h6>
						</a>
					</header>
					<div class="filter-content collapse show" id="collapse_1" style="">
						<div class="card-body">
							<form class="pb-3">
							<div class="input-group">
							<input type="text" class="form-control" placeholder="Search">
							<div class="input-group-append">
								<button class="btn btn-light" type="button"><i class="fa fa-search"></i></button>
							</div>
							</div>
							</form>

							<ul class="list-menu">
							<li><a href="#">People  </a></li>
							<li><a href="#">Watches </a></li>
							<li><a href="#">Cinema  </a></li>
							<li><a href="#">Clothes  </a></li>
							<li><a href="#">Home items </a></li>
							<li><a href="#">Animals</a></li>
							<li><a href="#">People </a></li>
							</ul>

						</div> <!-- card-body.// -->
					</div>
				</article> <!-- filter-group  .// -->
				<article class="filter-group">
					<header class="card-header">
						<a href="#" data-toggle="collapse" data-target="#collapse_2" aria-expanded="true" class="">
							<i class="icon-control fa fa-chevron-down"></i>
							<h6 class="title">Brands </h6>
						</a>
					</header>
					<div class="filter-content collapse show" id="collapse_2" style="">
						<div class="card-body">
							<label class="custom-control custom-checkbox">
							<input type="checkbox" checked="" class="custom-control-input">
							<div class="custom-control-label">Mercedes
								<b class="badge badge-pill badge-light float-right">120</b>  </div>
							</label>
							<label class="custom-control custom-checkbox">
							<input type="checkbox" checked="" class="custom-control-input">
							<div class="custom-control-label">Toyota
								<b class="badge badge-pill badge-light float-right">15</b>  </div>
							</label>
							<label class="custom-control custom-checkbox">
							<input type="checkbox" checked="" class="custom-control-input">
							<div class="custom-control-label">Mitsubishi
								<b class="badge badge-pill badge-light float-right">35</b> </div>
							</label>
							<label class="custom-control custom-checkbox">
							<input type="checkbox" checked="" class="custom-control-input">
							<div class="custom-control-label">Nissan
								<b class="badge badge-pill badge-light float-right">89</b> </div>
							</label>
							<label class="custom-control custom-checkbox">
							<input type="checkbox" class="custom-control-input">
							<div class="custom-control-label">Honda
								<b class="badge badge-pill badge-light float-right">30</b>  </div>
							</label>
				</div> <!-- card-body.// -->
					</div>
				</article> <!-- filter-group .// -->
				<article class="filter-group">
					<header class="card-header">
						<a href="#" data-toggle="collapse" data-target="#collapse_3" aria-expanded="true" class="">
							<i class="icon-control fa fa-chevron-down"></i>
							<h6 class="title">Price range </h6>
						</a>
					</header>
					<div class="filter-content collapse show" id="collapse_3" style="">
						<div class="card-body">
							<input type="range" class="custom-range" min="0" max="100" name="">
							<div class="form-row">
							<div class="form-group col-md-6">
							<label>Min</label>
							<input class="form-control" placeholder="$0" type="number">
							</div>
							<div class="form-group text-right col-md-6">
							<label>Max</label>
							<input class="form-control" placeholder="$1,0000" type="number">
							</div>
							</div> <!-- form-row.// -->
							<button class="btn btn-block btn-primary">Apply</button>
						</div><!-- card-body.// -->
					</div>
				</article> <!-- filter-group .// -->
				<article class="filter-group">
					<header class="card-header">
						<a href="#" data-toggle="collapse" data-target="#collapse_4" aria-expanded="true" class="">
							<i class="icon-control fa fa-chevron-down"></i>
							<h6 class="title">Sizes </h6>
						</a>
					</header>
					<div class="filter-content collapse show" id="collapse_4" style="">
						<div class="card-body">
						<label class="checkbox-btn">
							<input type="checkbox">
							<span class="btn btn-light"> XS </span>
						</label>

						<label class="checkbox-btn">
							<input type="checkbox">
							<span class="btn btn-light"> SM </span>
						</label>

						<label class="checkbox-btn">
							<input type="checkbox">
							<span class="btn btn-light"> LG </span>
						</label>

						<label class="checkbox-btn">
							<input type="checkbox">
							<span class="btn btn-light"> XXL </span>
						</label>
					</div><!-- card-body.// -->
					</div>
				</article> <!-- filter-group .// -->
				<article class="filter-group">
					<header class="card-header">
						<a href="#" data-toggle="collapse" data-target="#collapse_5" aria-expanded="false" class="">
							<i class="icon-control fa fa-chevron-down"></i>
							<h6 class="title">More filter </h6>
						</a>
					</header>
					<div class="filter-content collapse in" id="collapse_5" style="">
						<div class="card-body">
							<label class="custom-control custom-radio">
							<input type="radio" name="myfilter_radio" checked="" class="custom-control-input">
							<div class="custom-control-label">Any condition</div>
							</label>

							<label class="custom-control custom-radio">
							<input type="radio" name="myfilter_radio" class="custom-control-input">
							<div class="custom-control-label">Brand new </div>
							</label>

							<label class="custom-control custom-radio">
							<input type="radio" name="myfilter_radio" class="custom-control-input">
							<div class="custom-control-label">Used items</div>
							</label>

							<label class="custom-control custom-radio">
							<input type="radio" name="myfilter_radio" class="custom-control-input">
							<div class="custom-control-label">Very old</div>
							</label>
						</div><!-- card-body.// -->
					</div>
				</article> <!-- filter-group .// -->
			</div> <!-- card.// -->

		</aside>

		<main class="col-md-9">

			<header class="border-bottom mb-4 pb-3">
					<div class="form-inline">
						<span class="mr-md-auto">{{products_total}} Item{{products_total|pluralize}} found ({{products|length}} item{{products_total|pluralize}} on this page) </span>
						<select class="mr-2 form-control product-filter-parameter">
							<option value='latest' {% if filter_option == 'latest' %}selected{% endif %}>Latest items</option>
							<option value='trending' {% if filter_option == 'trending' %}selected{% endif %}>Trending</option>
							<option value='popular' {% if filter_option == 'popular' %}selected{% endif %}>Most Popular</option>
							<option value='cheapest' {% if filter_option == 'cheapest' %}selected{% endif %}>Cheapest</option>
						</select>
						<div class="btn-group">
							<a href="#" class="btn btn-outline-secondary active ListView" data-toggle="tooltip" title="" data-original-title="List view">
								<i class="fa fa-bars"></i></a>
							<a href="#" class="btn btn-outline-secondary GridView" data-toggle="tooltip" title="" data-original-title="Grid view">
								<i class="fa fa-th"></i></a>
						</div>
					</div>
			</header><!-- sect-heading -->
			<div class="toogle-products">

				{% for product in products %}

				<div class="row productsList">
					<div class="col-md-4 product-bar">
						<figure class="card card-product-grid productList-flex p-4">

							<div class="d-flex wrap-photo-and-icon">
								<div class="img-wrap d-flex">
									<img src="{{product.img.url}}" class="img-fluid main-pic">
								</div> <!-- img-wrap.// -->
								<i class="lni lni-heart font-light-grey"></i>

							</div>

							<figcaption class="info-wrap ml-4 product-description-list-page ">
								<div class="fix-height d-flex flex-column">
									<a href="{% url 'product_page' product.id %}" class="title text-left">{{ product.name }}</a>
									<div class="d-flex align-content-center pt-2 stars-div">

										<div class="d-flex">

											{% for element in product.get_star_avg.1 %}
												{% if element %}

													<i class="fas fa-star font-red fa-1x m-auto"></i>

												{% else %}

													<i class="far fa-star font-red fa-1x m-auto"></i>

												{% endif %}
											{% endfor %}
											<a href="{% url 'product_page' product.id %}#opinions" class='font-red pl-1 m-auto'>({% if not product.get_num_of_reviews %}0{% else %}{{product.get_num_of_reviews}}{% endif %})</a>

										</div>

										{% if product.get_num_of_questions %}
											<div class="pl-5">
												<a href="{% url 'product_page' product.id %}#ask-something" class='m-auto w-100 font-brown'>{{ product.get_num_of_questions }} Questions</a>
											</div>
										{% endif %}

										{% if  product.bought_num %}
											<div class="pl-5">
												<p class='m-auto w-100 font-brown'>Bought by {{ product.bought_num }} people </p>
											</div>
										{% endif %}

									</div>

									<div class="descriptionList">

										{% if product.cattegory == 'Phones' %}
											{% include 'partials/productSpecification_list/phones.html' %}
										{% elif product.cattegory == 'Laptops' %}
											{% include 'partials/productSpecification_list/Laptops.html' %}
										{% elif product.cattegory == 'PC' %}
											{% include 'partials/productSpecification_list/PC.html' %}
										{% elif product.cattegory == 'Monitors' %}
											{% include 'partials/productSpecification_list/Monitor.html' %}
										{% elif product.cattegory == 'Accesories for laptops' %}
											{% include 'partials/productSpecification_list/Accesories for laptops.html' %}
										{% elif product.cattegory == 'SSD' %}
											{% include 'partials/productSpecification_list/SSD.html' %}
										{% elif product.cattegory == 'Graphs' %}
											{% include 'partials/productSpecification_list/Graphs.html' %}
										{% elif product.cattegory == 'Ram' %}
											{% include 'partials/productSpecification_list/Ram.html' %}
										{% elif product.cattegory == 'Pendrives' %}
											{% include 'partials/productSpecification_list/Pendrives.html' %}
										{% elif product.cattegory == 'Routers' %}
											{% include 'partials/productSpecification_list/Routers.html' %}
										{% elif product.cattegory == 'Switches' %}
											{% include 'partials/productSpecification_list/Switches.html' %}
										{% elif product.cattegory == 'Motherboard' %}
											{% include 'partials/productSpecification_list/Motherboard.html' %}
										{% elif product.cattegory == 'CPU' %}
											{% include 'partials/productSpecification_list/CPU.html' %}
										{% elif product.cattegory == 'TV' %}
											{% include 'partials/productSpecification_list/TV.html' %}
										{% elif product.cattegory == 'Headphones' %}
											{% include 'partials/productSpecification_list/Headphones.html' %}
										{% endif %}

									</div>

								</div>
							</figcaption>

							<div class="ml-2 mr-4 py-1 product-price-list-page d-flex flex-column justify-content-center">
								<div class="price-wrap mt-2">

									{% if product.promotion %}
										<div class="d-flex flex-column">
											<div class="d-flex">
												<span class="badge badge-danger font-size-0-8"> PROMOTION </span>
												<del class="price-old font-size-0-8 pl-3">${{product.price}}</del>
											</div>
											<span class="price pt-3">${{product.promotion}}</span>
										</div>

									{% else %}
										<span class="price pt-5">${{product.price}}</span>
									{% endif %}

									{% include 'partials/free_deliver.html' %}


								</div> <!-- price-wrap.// -->
								<div class="d-flex basket ">
									<a href="#" data-product="{{ product.id }}" data-action="add" class=" update-cart add-to-cart btn btn-block btn-red">Add to cart </a>
								</div>
							</div>
						</figure>
					</div>
				</div> <!-- col.// -->

			{% endfor %}

			</div>

			<nav class="mt-4" aria-label="Page navigation sample">

			{% if products.has_other_pages %}
				<ul class="pagination justify-content-center">

					{% if products.has_previous %}

						<li class="page-item"><a class="page-link toogle-view" href="{% url 'products_cart' cattegory %}?page={{ products.previous_page_number }}">&#10094; Prev</a></li>

						{% if 1 not in custom_range %}

							<li class="page-item
							{% if page == products.number %}active btn-red
							{% endif %} "><a class="page-link toogle-view"
							href="{% url 'products_cart' cattegory %}?page=1
							{% if filter_option %}&filter={{filter_option}}
							{% endif %}">First page</a>
							</li>

							<li class="page-item"><a class="page-link toogle-view">..</a></li>

						{% endif %}


					{% endif %}

					{% for page in custom_range %}

						<li class="page-item
						{% if page == products.number %}active
						{% endif %} "><a class="page-link toogle-view" href="{% url 'products_cart' cattegory %}?page={{page}}{% if filter_option %}&filter={{filter_option}}{% endif %}">{{page}}</a></li>


					{% endfor %}

					{% if products.number not in page_num_range %}

						<li class="page-item"><p class="page-link toogle-view">..</p></li>
						<li class="page-item"><a class="page-link toogle-view"
						href="{% url 'products_cart' cattegory %}?page={{last_page}}
						{% if filter_option %}&filter={{filter_option}}
						{% endif %}">Last page</a>
						</li>

					{% endif %}

					{% if products.has_next %}

						<li class="page-item"><a class="page-link toogle-view" href="{% url 'products_cart' cattegory %}?page={{ products.next_page_number }}">Next &#10095;</a></li>

					{% endif %}

				</ul>
			{% endif %}
			</nav>

		</main>
	</div>
</div>
<script src="{% static 'js/product_search/toogleView.js' %}"></script>
<script src="{% static 'js/product_search/renderFilterProducts.js' %}"></script>
<script>
	let url = window.location.href
</script>

{% endblock %}
